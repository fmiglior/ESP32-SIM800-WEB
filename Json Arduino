//{"broker":"23.mqttcloud.com","port":"1880","apn":"internet.mts.by","m_user":"aaaa","m_pass":"bbbb"}

#include <ArduinoJson.h>

void setup() {
DynamicJsonBuffer jsonBuffer;
Serial.begin(9600);
String at = " sfddfsdfdsf dcg {\"broker\":\"23.mqttcloud.com\",\"port\":\"1880\",\"apn\":\"internet.mts.by\",\"m_user\":\"aaaa\",\"m_pass\":\"bbbb\"} dsfsdf";
at = at.substring(at.indexOf("{"), at.lastIndexOf("}")+1); Serial.println(at);
JsonObject& root = jsonBuffer.parseObject(at);

String broker = root["broker"]; Serial.println(broker);
String port = root["port"];     Serial.println(port);
String apn = root["apn"];       Serial.println(apn);
String m_user = root["m_user"]; Serial.println(m_user);
String m_pass = root["m_pass"]; Serial.println(m_pass);
//String broker = root["broker"]; Serial.println(broker);

/*
String broker = at.substring(at.indexOf("broker\":")+9 ); broker = broker.substring(0, broker.indexOf("\"")); Serial.println(broker);
String port = at.substring(at.indexOf("port\":")+7 );     port = port.substring(0, port.indexOf("\"")); Serial.println(port);
String apn = at.substring(at.indexOf("apn\":")+6 );       apn = apn.substring(0, apn.indexOf("\"")); Serial.println(apn);
String m_user = at.substring(at.indexOf("m_user\":")+9 ); m_user = m_user.substring(0, m_user.indexOf("\"")); Serial.println(m_user);
String m_pass = at.substring(at.indexOf("m_pass\":")+9 ); m_pass = m_pass.substring(0, m_pass.indexOf("\"")); Serial.println(m_pass);

*/
}

  

void loop() {

}


/*
Скетч использует 8338 байт (27%) памяти устройства. Всего доступно 30720 байт.
Глобальные переменные используют 474 байт (23%) динамической памяти, оставляя 1574 байт для локальных переменных. Максимум: 2048 байт.

Скетч использует 4392 байт (14%) памяти устройства. Всего доступно 30720 байт.
Глобальные переменные используют 368 байт (17%) динамической памяти, оставляя 1680 байт для локальных переменных. Максимум: 2048 байт.
*/